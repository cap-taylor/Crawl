# GUI 개선 사항 요약

> 구현 완료: 2025-10-16
> 버전: 1.2.0 (GUI 개선)

## 개선된 기능 (9개 항목 완료)

### 🔴 필수 개선 (3개)

#### 1. 진행률 표시 추가
- **위치**: 상태 라벨 하단
- **기능**: 실시간 수집 개수 표시
  - 테스트 모드: "수집: 45/100개 (45%)"
  - 무한 모드: "수집: 123개 (무한 모드)"
- **업데이트**: 1초마다 자동 갱신
- **구현**: `self.progress_label`, `_update_stats_display()`

#### 2. 재개 모드 정보 표시
- **위치**: "이어서 수집" 체크박스 아래
- **기능**: DB에서 마지막 수집 위치 조회 후 표시
  - 예: "마지막 수집: 123번째 상품까지 완료 (124번째부터 재개)"
- **트리거**: 재개 체크박스 클릭 시 자동 조회
- **구현**: `_update_resume_info()`, `_on_resume_check()`

#### 3. 무한 모드 확인창
- **위치**: 전체 수집 모드 시작 시 팝업
- **기능**: 실수 방지용 확인 다이얼로그
  - "전체 수집 모드를 시작하시겠습니까?"
  - "중지 버튼을 누를 때까지 계속 수집됩니다."
- **버튼**: 시작 (녹색) / 취소 (회색)
- **구현**: `_start_crawling()` 내 확인창 로직

---

### 🟡 편의성 개선 (3개)

#### 4. 수집 통계 패널
- **위치**: 상태 영역 오른쪽
- **표시 항목**:
  - 수집: X개
  - 중복 스킵: X개
  - 속도: X.X개/분
  - 최근: [상품명]
- **업데이트**: 1초마다 자동 갱신
- **구현**: `stats_frame`, `_update_stats_display()`

#### 5. 로그 레벨 필터
- **위치**: 로그 헤더 버튼
- **기능**: 간결/상세 모드 토글
  - 간결 모드: 중요 로그만 표시
  - 상세 모드: 모든 로그 표시
- **사용법**: "간결 모드" 버튼 클릭
- **구현**: `_toggle_log_level()`, `_log(level=)`

#### 6. 최근 수집 기록 보기
- **위치**: 로그 헤더 "최근 기록" 버튼
- **기능**: 최근 10회 크롤링 기록 팝업
- **표시 정보**:
  - 카테고리, 시작 시간, 종료 시간, 상태, 수집 개수
- **구현**: `_show_history()`, DB 조회

---

### 🟢 추가 기능 (3개)

#### 7. 수집 속도 표시
- **위치**: 통계 패널 내
- **계산**: (수집 개수) / (경과 시간(분))
- **형식**: "속도: 12.5개/분"
- **구현**: `_update_stats_display()` 내 계산 로직

#### 8. 다크/라이트 테마 토글
- **위치**: 로그 헤더 버튼
- **기능**: 테마 전환 (다크 ↔ 라이트)
- **버튼 텍스트 변경**: 현재 반대 테마 표시
- **구현**: `_toggle_theme()`, `ctk.set_appearance_mode()`

#### 9. 상품 미리보기
- **위치**: 통계 패널 하단
- **기능**: 최근 수집 상품명 표시
- **형식**: "최근: [상품명 35자...]"
- **추출**: 로그에서 "[상품명]" 패턴 감지
- **구현**: `_log()` 내 패턴 매칭, `stats['last_product']`

---

## 코드 변경 사항

### 추가된 클래스 변수
```python
self.stats = {
    'collected': 0,    # 수집된 상품 수
    'skipped': 0,      # 중복 스킵
    'failed': 0,       # 실패
    'speed': 0.0,      # 평균 속도 (개/분)
    'start_time': None,
    'last_product': None  # 최근 수집 상품명
}
self.log_level = "normal"  # "normal" or "verbose"
```

### 추가된 위젯
- `self.progress_label` - 진행률 표시
- `self.stats_collected_label` - 수집 개수
- `self.stats_skipped_label` - 중복 스킵
- `self.stats_speed_label` - 수집 속도
- `self.stats_preview_label` - 상품 미리보기
- `self.resume_info_label` - 재개 정보
- `self.theme_button` - 테마 토글
- `self.log_level_button` - 로그 레벨
- `self.history_button` - 최근 기록

### 추가된 메서드
- `_update_resume_info()` - 재개 정보 조회 및 표시
- `_on_resume_check()` - 재개 체크박스 이벤트
- `_toggle_theme()` - 테마 토글
- `_toggle_log_level()` - 로그 레벨 토글
- `_show_history()` - 최근 기록 팝업
- `_update_stats_display()` - 통계 업데이트 (1초마다)

### 수정된 메서드
- `__init__()` - 통계 변수 초기화, 타이머 추가
- `_log()` - 로그 레벨 필터링, 상품명 추출 추가
- `_start_crawling()` - 무한 모드 확인창, 통계 초기화
- `_on_category_change()` - 재개 정보 업데이트 추가

---

## 사용 방법

### 1. 진행률 확인
- 수집 시작 후 상태 영역에서 실시간 진행률 확인
- "수집: 45/100개 (45%)" 형태로 표시

### 2. 재개 기능 사용
1. "이어서 수집" 체크박스 클릭
2. 재개 정보 자동 표시 (마지막 위치)
3. 수집 시작하면 해당 위치부터 재개

### 3. 통계 확인
- 오른쪽 통계 패널에서 실시간 정보 확인
- 수집/중복/속도/최근 상품 동시 표시

### 4. 로그 레벨 변경
- "간결 모드" 버튼 클릭 → 중요 로그만
- "상세 모드" 버튼 클릭 → 모든 로그

### 5. 테마 변경
- "라이트 모드" 버튼 클릭 → 밝은 테마
- "다크 모드" 버튼 클릭 → 어두운 테마

### 6. 최근 기록 보기
- "최근 기록" 버튼 클릭
- 팝업 창에서 최근 10회 수집 기록 확인

---

## 테스트 방법

```bash
# GUI 개선 사항 테스트
python3 tests/test_gui_improvements.py

# 실제 수집 테스트 (테스트 모드 5개)
# GUI에서: 테스트 모드 선택 → 5개 입력 → 시작
```

### 테스트 체크리스트
- [ ] 진행률 표시 정상 동작
- [ ] 통계 패널 실시간 업데이트
- [ ] 재개 정보 정확히 표시
- [ ] 무한 모드 확인창 표시
- [ ] 테마 토글 정상 작동
- [ ] 로그 레벨 필터링 정상
- [ ] 최근 기록 팝업 정상
- [ ] 상품 미리보기 업데이트

---

## 성능 영향

### 메모리
- **증가량**: 약 1-2MB (통계 정보 저장)
- **문제 없음**: 기존 로그 제한 (1000줄)으로 누수 방지

### CPU
- **통계 업데이트**: 1초마다 실행 (매우 가벼움)
- **UI 렌더링**: 변경된 라벨만 업데이트 (효율적)

### 장시간 실행
- ✅ 24시간 연속 실행 가능
- ✅ 메모리 누수 없음 (기존 v1.1.4 개선 유지)

---

## 향후 개선 가능 항목

### 추가 기능 아이디어
1. **그래프 차트**: 수집 속도 실시간 그래프
2. **알림**: 목표 개수 도달 시 알림
3. **북마크**: 특정 상품 북마크 기능
4. **필터**: 카테고리별 통계 필터
5. **내보내기**: 통계 CSV 내보내기

### 현재 제한사항
- 로그 레벨 필터는 새 로그부터 적용 (기존 로그 유지)
- 통계는 현재 세션만 (DB 저장 안 됨)
- 상품 미리보기는 최근 1개만

---

## 버전 정보

- **이전 버전**: 1.1.4 (장시간 크롤링 안정성 개선)
- **현재 버전**: 1.2.0 (GUI 개선)
- **다음 예정**: 1.2.1 (버그 수정)
